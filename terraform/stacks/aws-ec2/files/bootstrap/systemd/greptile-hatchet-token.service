[Unit]
Description=Generate Hatchet client token for Greptile
Requires=greptile-hatchet.service
After=greptile-hatchet.service
ConditionPathExists=/opt/greptile/.env
ConditionPathExists=!/opt/greptile/.hatchet-token-ready

[Service]
Type=oneshot
RemainAfterExit=yes
WorkingDirectory=/opt/greptile
ExecStart=/opt/greptile/bin/generate-hatchet-token.sh
TimeoutStartSec=300
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
