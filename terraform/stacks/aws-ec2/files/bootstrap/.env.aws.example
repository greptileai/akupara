# ------------------------------
# Container selection
# ------------------------------
GREPTILE_TAG=0.0.0                     # pin to validated Greptile release
# Set to 'ecr' or 'dockerhub' (ECR recommended on AWS)
REGISTRY_PROVIDER=ecr
CONTAINER_REGISTRY=000000000000.dkr.ecr.us-east-1.amazonaws.com/greptile
HATCHET_TAG=v0.0.0

# ------------------------------
# Database Configuration (RDS)
# ------------------------------
DB_HOST=greptile-postgres-db.example.us-east-1.rds.amazonaws.com
DB_PORT=5432
DB_USER=postgres
DB_NAME=postgres
DB_PASSWORD=REPLACE_ME
DATABASE_URL=postgresql://postgres:REPLACE_ME@greptile-postgres-db.example.us-east-1.rds.amazonaws.com:5432/postgres
DIRECT_URL=postgresql://postgres:REPLACE_ME@greptile-postgres-db.example.us-east-1.rds.amazonaws.com:5432/postgres
DB_SSL_DISABLE=true

# Vector DB (reuse RDS)
VECTOR_DB_HOST=greptile-postgres-db.example.us-east-1.rds.amazonaws.com
VECTOR_DB_NAME=vector
VECTOR_DB_PASSWORD=REPLACE_ME
VECTOR_DB_PORT=5432
VECTOR_DB_PROVIDER=pgvector
VECTOR_DB_USER=postgres
VECTOR_EMBEDDINGS_TABLE_NAME=embeddings
VECTOR_DB_URL=postgresql://postgres:REPLACE_ME@greptile-postgres-db.example.us-east-1.rds.amazonaws.com:5432/vector

# Hatchet Configuration (reuse RDS)
RABBITMQ_USER=hatchet
RABBITMQ_PASSWORD=hatchet
HATCHET_DATABASE_HOST=greptile-postgres-db.example.us-east-1.rds.amazonaws.com
HATCHET_DATABASE_PORT=5432
HATCHET_DATABASE_USER=hatchet
HATCHET_DATABASE_PASSWORD=REPLACE_ME
HATCHET_DATABASE_NAME=hatchet
HATCHET_DATABASE_URL=postgresql://${HATCHET_DATABASE_USER}:${HATCHET_DATABASE_PASSWORD}@${HATCHET_DATABASE_HOST}:${HATCHET_DATABASE_PORT}/${HATCHET_DATABASE_NAME}

# Greptile Services
IP_ADDRESS=1.2.3.4
APP_URL=https://1.2.3.4:3000
NEXTAUTH_URL=https://1.2.3.4:3000
GREPTILE_AUTH_SERVER=http://greptile-auth:3001
GREPTILE_API_URL=http://greptile-api:3002/v2
API_URL=http://greptile-api:3002
GREPTILE_WEBHOOK_URL=http://greptile-webhook:3007/webhook
GITHUB_WEBHOOK_URL=http://greptile-webhook:3007/webhook
GITLAB_WEBHOOK_URL=http://greptile-webhook:3007/webhook
LLM_PROXY_BASE_URL='http://greptile-llmproxy:4000'

# Authentication
JWT_SECRET=base64-32-char-secret
TOKEN_ENCRYPTION_KEY=32-char-secret

# GitHub (cloud)
GITHUB_ENABLED=false
GITHUB_APP_ID=123
GITHUB_APP_URL=https://github.example.com/github-apps/your_app
GITHUB_CLIENT_ID=Iv1.xxxxxx
GITHUB_CLIENT_SECRET=client_secret
GITHUB_PRIVATE_KEY=-----BEGIN RSA PRIVATE KEY-----REDACTED-----END RSA PRIVATE KEY-----
GITHUB_BOT_USERNAME=greptile-bot
GITHUB_BOT_LOGIN=greptile-app
WEBHOOK_SECRET=github_webhook_secret

# GitHub Enterprise
GITHUB_ENTERPRISE_ENABLED=true
GITHUB_ENTERPRISE_APP_URL=https://github.example.com/github-apps/your_app
GITHUB_ENTERPRISE_APP_ID=123
GITHUB_ENTERPRISE_API_URL=https://github.example.com/api/v3/
GITHUB_ENTERPRISE_URL=https://github.example.com
GITHUB_ENTERPRISE_APP_PRIVATE_KEY=-----BEGIN RSA PRIVATE KEY-----REDACTED-----END RSA PRIVATE KEY-----
GITHUB_ENTERPRISE_CLIENT_ID=Iv1.xxxxxx
GITHUB_ENTERPRISE_CLIENT_SECRET=client_secret

# Hatchet client config
# HATCHET_CLIENT_TOKEN is auto-generated to /opt/greptile/.env.hatchet-generated
HATCHET_CLIENT_TLS_STRATEGY=none

# LLM configuration
ANTHROPIC_BASE_URL=https://api.anthropic.com
ANTHROPIC_KEY=sk-ant-...
OPENAI_API_BASE_URL=https://api.openai.com/v1/
OPENAI_KEY=sk-openai-...
AZURE_OPENAI_URL=https://onboardai.openai.azure.com/
AZURE_OPENAI_KEY=azure-key
AGENT_MODEL_PROVIDER=anthropic
AGENT_MODEL=claude-sonnet-4-20250514
CHAT_MODEL_PROVIDER=anthropic
CHAT_MODEL=claude-sonnet-4-20250514
DEFAULT_CHAT_MODEL=claude-sonnet-4-20250514
REFINER_MODEL_PROVIDER=anthropic
REFINER_MODEL=claude-3-7-sonnet-20250219
SUMMARIZER_MODEL_PROVIDER=anthropic
SUMMARIZER_MODEL=claude-3-5-sonnet-20241022
EMBEDDINGS_MODEL_PROVIDER=openai
EMBEDDINGS_MODEL=text-embedding-ada-002

# Integrations & telemetry
SLACK_ENABLED=false
LINEAR_ENABLED=false
ATLASSIAN_ENABLED=false
NOTIFICATIONS=false
NODE_ENV=production
BILLING=false
BENCHMARK=false
ANALYTICS=false

# Redis (Terraform-managed ElastiCache)
REDIS_HOST=greptile-redis.xxxxxx.use1.cache.amazonaws.com
REDIS_PORT=6379
REDIS_USE_TLS=true
REDIS_PASSWORD=redis-auth-token

# BoxyHQ / SAML (optional)
AUTH_SAML_ONLY=false
AUTH_BOXYHQ_SAML_ID=saml-id
AUTH_BOXYHQ_SAML_SECRET=
AUTH_BOXYHQ_API_KEY=boxyhq-api-key
AUTH_BOXYHQ_URL=http://jackson:5225

JACKSON_DB_ENCRYPTION_KEY=jackson-db-key
JACKSON_HOST_URL=https://sso.example.com
JACKSON_ADMIN_CREDENTIALS=admin@example.com:password
JACKSON_PUBLIC_KEY=-----BEGIN CERTIFICATE-----REDACTED-----END CERTIFICATE-----
JACKSON_PRIVATE_KEY=-----BEGIN RSA PRIVATE KEY-----REDACTED-----END RSA PRIVATE KEY-----
JACKSON_CLIENT_SECRET_VERIFIER=jackson-secret
JACKSON_IDP_ENABLED=true

AUTH_GITHUB_ID=
AUTH_GITHUB_SECRET=

# GitLab
GITLAB_ENABLED=true

# Email / SMTP
EMAIL_PROVIDER=SES
EMAIL_FROM=noreply@example.com
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=smtp-user
SMTP_PASSWORD=smtp-password
SMTP_SECURE=false
SMTP_TLS=true
SMTP_REJECT_UNAUTHORIZED=true

# Custom Greptile feature flags
UPDATE_EXISTING_SUMMARY_COMMENT=false
INCLUDE_SUMMARY=true
SUMMARY_COLLAPSIBLE=false
SUMMARY_DEFAULT_OPEN=false
INCLUDE_CONFIDENCE_SCORE=true
CONFIDENCE_SCORE_COLLAPSIBLE=false
CONFIDENCE_SCORE_DEFAULT_OPEN=false
INCLUDE_ISSUES_TABLE=true
ISSUES_TABLE_COLLAPSIBLE=false
ISSUES_TABLE_DEFAULT_OPEN=false
INCLUDE_SEQUENCE_DIAGRAM=true
SEQUENCE_DIAGRAM_COLLAPSIBLE=false
SEQUENCE_DIAGRAM_DEFAULT_OPEN=false
DEFAULT_TRIGGER_ON_UPDATES=false
PROMPT_TO_FIX_WITH_AI=true

# AWS region for Bedrock and infra alignment
AWS_REGION=us-east-1

# Procedural memory
LEARN_PROCEDURAL_MEMORY=true
USE_PROCEDURAL_MEMORY=true
MEMORY_EVIDENCE_THRESHOLD=1
MEMORY_LEARNING_CONFIDENCE_THRESHOLD=0.15

# Perforce / Swarm (optional)
P4USER=
P4PASSWD=
P4PORT=
P4CLIENT=
P4_CHILD_PATHS=
SWARM_URL=

# LLM proxy
LITELLM_MASTER_KEY=llmproxy-master-key
LLM_PROXY_KEY=llmproxy-master-key
LLM_GATEWAY_CLIENT_SECRET=
